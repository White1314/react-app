{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport \"antd/lib/row/style/css\";\nimport _Row from \"antd/lib/row\";\nimport \"antd/lib/col/style/css\";\nimport _Col from \"antd/lib/col\";\nimport \"antd/lib/list/style/css\";\nimport _List from \"antd/lib/list\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useCallback } from 'react';\nimport { withRouter } from 'next/router';\nimport Router from 'next/router';\nimport { getApiData } from '../server/utils.js';\nimport * as actions from '../actions';\nvar LANGUAGES = ['JavaScript', 'HTML', 'CSS', 'TypeScript', 'Java', 'Rust'];\nvar SORT_TYPES = [{\n  name: 'Best Match'\n}, {\n  name: 'Most Stars',\n  value: 'stars',\n  order: 'dsc'\n}, {\n  name: 'Fewest Stars',\n  value: 'stars',\n  order: 'asc'\n}, {\n  name: 'Most Forks',\n  value: 'forks',\n  order: 'dsc'\n}, {\n  name: 'Fewest Forks',\n  value: 'forks',\n  order: 'asc'\n}];\nvar selectedItemStyle = {\n  borderLeft: '2px solid #6739b6',\n  fontWeight: 100\n};\n\nvar Search = function Search(_ref) {\n  var router = _ref.router;\n  var query = router.query;\n\n  var FilterLanguageLink = function FilterLanguageLink(item) {\n    var params = _objectSpread({}, query, {}, {\n      lang: item\n    });\n\n    var q = params.q,\n        lang = params.lang,\n        sort = params.sort,\n        order = params.order;\n    q = q ? \"?q=\".concat(q) : '';\n    lang = lang ? \"&lang=\".concat(lang) : '';\n    sort = sort ? \"&sort=\".concat(sort) : '';\n    order = order ? \"&order=\".concat(order) : '';\n    var path = \"/search\".concat(q).concat(lang).concat(sort).concat(order);\n    return path;\n  };\n\n  var handleLanguageClick = useCallback(function (item) {\n    Router.push({\n      pathname: '/search?',\n      query: {\n        q: query.q,\n        lang: item,\n        sort: query.sort,\n        order: query.order\n      }\n    });\n  }, [query]);\n  var handleSortTypesClick = useCallback(function (item) {\n    Router.push({\n      pathname: '/search',\n      query: {\n        q: query.q,\n        lang: query.lang,\n        sort: item.value,\n        order: item.order\n      }\n    });\n  }, [query]);\n  return __jsx(\"div\", {\n    className: \"jsx-3164429104\" + \" \" + \"root\"\n  }, __jsx(\"div\", {\n    className: \"jsx-3164429104\" + \" \" + \"menu\"\n  }, __jsx(_Row, {\n    gutter: 20\n  }, __jsx(_Col, {\n    span: 6\n  }, __jsx(_List, {\n    bordered: true,\n    header: __jsx(\"span\", {\n      className: \"jsx-3164429104\" + \" \" + \"list-header\"\n    }, \"\\u8BED\\u8A00\"),\n    style: {\n      marginBottom: 20\n    },\n    dataSource: LANGUAGES,\n    renderItem: function renderItem(item) {\n      var selected = item === query.lang;\n      return __jsx(_List.Item, {\n        style: selected ? selectedItemStyle : null\n      }, __jsx(\"a\", {\n        href: FilterLanguageLink(item),\n        className: \"jsx-3164429104\"\n      }, item));\n    }\n  }))), __jsx(_Row, {\n    gutter: 20\n  }, __jsx(_Col, {\n    span: 6\n  }, __jsx(_List, {\n    bordered: true,\n    header: __jsx(\"span\", {\n      className: \"jsx-3164429104\" + \" \" + \"list-header\"\n    }, \"\\u6392\\u5E8F\"),\n    dataSource: SORT_TYPES,\n    renderItem: function renderItem(item) {\n      var selected = false;\n\n      if (item.name === 'Best Match' && !query.sort) {\n        selected = true;\n      } else if (item.value === query.sort && item.order === query.order) {\n        selected = true;\n      }\n\n      return __jsx(_List.Item, {\n        style: selected ? selectedItemStyle : null\n      }, __jsx(\"a\", {\n        onClick: function onClick() {\n          return handleSortTypesClick(item);\n        },\n        className: \"jsx-3164429104\"\n      }, item.name));\n    }\n  })))), __jsx(_JSXStyle, {\n    id: \"3164429104\"\n  }, \".root.jsx-3164429104{height:100%;}.menu.jsx-3164429104{height:100%;overflow-x:hidden;overflow-y:auto;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6XFwzNjBEb3dubG9hZHNcXFZzY29kZVxccHJvZ3JhbVxcTmV4dC1HaXRodWItQXBwXFxwYWdlc1xcc2VhcmNoLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUF3SGtCLEFBR3VCLEFBR0EsWUFGZCxBQUdvQixrQkFDRixnQkFDbEIiLCJmaWxlIjoiRDpcXDM2MERvd25sb2Fkc1xcVnNjb2RlXFxwcm9ncmFtXFxOZXh0LUdpdGh1Yi1BcHBcXHBhZ2VzXFxzZWFyY2gudHN4Iiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlQ2FsbGJhY2sgfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IHdpdGhSb3V0ZXIgfSBmcm9tICduZXh0L3JvdXRlcic7XHJcbmltcG9ydCBSb3V0ZXIgZnJvbSAnbmV4dC9yb3V0ZXInO1xyXG5pbXBvcnQgeyBSb3csIENvbCwgTGlzdCB9IGZyb20gJ2FudGQnO1xyXG5cclxuaW1wb3J0IHsgZ2V0QXBpRGF0YSB9IGZyb20gJy4uL3NlcnZlci91dGlscy5qcyc7XHJcbmltcG9ydCAqIGFzIGFjdGlvbnMgZnJvbSAnLi4vYWN0aW9ucyc7XHJcblxyXG5jb25zdCBMQU5HVUFHRVMgPSBbJ0phdmFTY3JpcHQnLCAnSFRNTCcsICdDU1MnLCAnVHlwZVNjcmlwdCcsICdKYXZhJywgJ1J1c3QnXTtcclxuY29uc3QgU09SVF9UWVBFUyA9IFtcclxuICB7IG5hbWU6ICdCZXN0IE1hdGNoJyB9LFxyXG4gIHsgbmFtZTogJ01vc3QgU3RhcnMnLCB2YWx1ZTogJ3N0YXJzJywgb3JkZXI6ICdkc2MnIH0sXHJcbiAgeyBuYW1lOiAnRmV3ZXN0IFN0YXJzJywgdmFsdWU6ICdzdGFycycsIG9yZGVyOiAnYXNjJyB9LFxyXG4gIHsgbmFtZTogJ01vc3QgRm9ya3MnLCB2YWx1ZTogJ2ZvcmtzJywgb3JkZXI6ICdkc2MnIH0sXHJcbiAgeyBuYW1lOiAnRmV3ZXN0IEZvcmtzJywgdmFsdWU6ICdmb3JrcycsIG9yZGVyOiAnYXNjJyB9LFxyXG5dO1xyXG5jb25zdCBzZWxlY3RlZEl0ZW1TdHlsZSA9IHtcclxuICBib3JkZXJMZWZ0OiAnMnB4IHNvbGlkICM2NzM5YjYnLFxyXG4gIGZvbnRXZWlnaHQ6IDEwMCxcclxufTtcclxuXHJcbmludGVyZmFjZSBJdGVtIHtcclxuICBuYW1lOiBzdHJpbmc7XHJcbiAgdmFsdWU6IHN0cmluZztcclxuICBvcmRlcjogc3RyaW5nO1xyXG59XHJcblxyXG5jb25zdCBTZWFyY2ggPSAoeyByb3V0ZXIgfSkgPT4ge1xyXG4gIGNvbnN0IHsgcXVlcnkgfSA9IHJvdXRlcjtcclxuXHJcbiAgY29uc3QgRmlsdGVyTGFuZ3VhZ2VMaW5rID0gKGl0ZW06IGFueSkgPT4ge1xyXG4gICAgbGV0IHBhcmFtcyA9IHsgLi4ucXVlcnksIC4uLnsgbGFuZzogaXRlbSB9IH07XHJcbiAgICBsZXQgeyBxLCBsYW5nLCBzb3J0LCBvcmRlciB9ID0gcGFyYW1zO1xyXG4gICAgcSA9IHEgPyBgP3E9JHtxfWAgOiAnJztcclxuICAgIGxhbmcgPSBsYW5nID8gYCZsYW5nPSR7bGFuZ31gIDogJyc7XHJcbiAgICBzb3J0ID0gc29ydCA/IGAmc29ydD0ke3NvcnR9YCA6ICcnO1xyXG4gICAgb3JkZXIgPSBvcmRlciA/IGAmb3JkZXI9JHtvcmRlcn1gIDogJyc7XHJcbiAgICBsZXQgcGF0aCA9IGAvc2VhcmNoJHtxfSR7bGFuZ30ke3NvcnR9JHtvcmRlcn1gO1xyXG4gICAgcmV0dXJuIHBhdGg7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgaGFuZGxlTGFuZ3VhZ2VDbGljayA9IHVzZUNhbGxiYWNrKFxyXG4gICAgKGl0ZW06IHN0cmluZykgPT4ge1xyXG4gICAgICBSb3V0ZXIucHVzaCh7XHJcbiAgICAgICAgcGF0aG5hbWU6ICcvc2VhcmNoPycsXHJcbiAgICAgICAgcXVlcnk6IHtcclxuICAgICAgICAgIHE6IHF1ZXJ5LnEsXHJcbiAgICAgICAgICBsYW5nOiBpdGVtLFxyXG4gICAgICAgICAgc29ydDogcXVlcnkuc29ydCxcclxuICAgICAgICAgIG9yZGVyOiBxdWVyeS5vcmRlcixcclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuICAgIH0sXHJcbiAgICBbcXVlcnldXHJcbiAgKTtcclxuXHJcbiAgY29uc3QgaGFuZGxlU29ydFR5cGVzQ2xpY2sgPSB1c2VDYWxsYmFjayhcclxuICAgIChpdGVtOiBJdGVtKSA9PiB7XHJcbiAgICAgIFJvdXRlci5wdXNoKHtcclxuICAgICAgICBwYXRobmFtZTogJy9zZWFyY2gnLFxyXG4gICAgICAgIHF1ZXJ5OiB7XHJcbiAgICAgICAgICBxOiBxdWVyeS5xLFxyXG4gICAgICAgICAgbGFuZzogcXVlcnkubGFuZyxcclxuICAgICAgICAgIHNvcnQ6IGl0ZW0udmFsdWUsXHJcbiAgICAgICAgICBvcmRlcjogaXRlbS5vcmRlcixcclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuICAgIH0sXHJcbiAgICBbcXVlcnldXHJcbiAgKTtcclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxkaXYgY2xhc3NOYW1lPVwicm9vdFwiPlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1lbnVcIj5cclxuICAgICAgICA8Um93IGd1dHRlcj17MjB9PlxyXG4gICAgICAgICAgPENvbCBzcGFuPXs2fT5cclxuICAgICAgICAgICAgPExpc3RcclxuICAgICAgICAgICAgICBib3JkZXJlZFxyXG4gICAgICAgICAgICAgIGhlYWRlcj17PHNwYW4gY2xhc3NOYW1lPVwibGlzdC1oZWFkZXJcIj7or63oqIA8L3NwYW4+fVxyXG4gICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpbkJvdHRvbTogMjAgfX1cclxuICAgICAgICAgICAgICBkYXRhU291cmNlPXtMQU5HVUFHRVN9XHJcbiAgICAgICAgICAgICAgcmVuZGVySXRlbT17KGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBzZWxlY3RlZCA9IGl0ZW0gPT09IHF1ZXJ5Lmxhbmc7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgICA8TGlzdC5JdGVtIHN0eWxlPXtzZWxlY3RlZCA/IHNlbGVjdGVkSXRlbVN0eWxlIDogbnVsbH0+XHJcbiAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj17RmlsdGVyTGFuZ3VhZ2VMaW5rKGl0ZW0pfT57aXRlbX08L2E+XHJcbiAgICAgICAgICAgICAgICAgIDwvTGlzdC5JdGVtPlxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAvPlxyXG4gICAgICAgICAgPC9Db2w+XHJcbiAgICAgICAgPC9Sb3c+XHJcbiAgICAgICAgPFJvdyBndXR0ZXI9ezIwfT5cclxuICAgICAgICAgIDxDb2wgc3Bhbj17Nn0+XHJcbiAgICAgICAgICAgIDxMaXN0XHJcbiAgICAgICAgICAgICAgYm9yZGVyZWRcclxuICAgICAgICAgICAgICBoZWFkZXI9ezxzcGFuIGNsYXNzTmFtZT1cImxpc3QtaGVhZGVyXCI+5o6S5bqPPC9zcGFuPn1cclxuICAgICAgICAgICAgICBkYXRhU291cmNlPXtTT1JUX1RZUEVTfVxyXG4gICAgICAgICAgICAgIHJlbmRlckl0ZW09eyhpdGVtOiBJdGVtKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgc2VsZWN0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGlmIChpdGVtLm5hbWUgPT09ICdCZXN0IE1hdGNoJyAmJiAhcXVlcnkuc29ydCkge1xyXG4gICAgICAgICAgICAgICAgICBzZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxyXG4gICAgICAgICAgICAgICAgICBpdGVtLnZhbHVlID09PSBxdWVyeS5zb3J0ICYmXHJcbiAgICAgICAgICAgICAgICAgIGl0ZW0ub3JkZXIgPT09IHF1ZXJ5Lm9yZGVyXHJcbiAgICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgICAgc2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgICAgPExpc3QuSXRlbSBzdHlsZT17c2VsZWN0ZWQgPyBzZWxlY3RlZEl0ZW1TdHlsZSA6IG51bGx9PlxyXG4gICAgICAgICAgICAgICAgICAgIDxhIG9uQ2xpY2s9eygpID0+IGhhbmRsZVNvcnRUeXBlc0NsaWNrKGl0ZW0pfT5cclxuICAgICAgICAgICAgICAgICAgICAgIHtpdGVtLm5hbWV9XHJcbiAgICAgICAgICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgICAgICAgICA8L0xpc3QuSXRlbT5cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgLz5cclxuICAgICAgICAgIDwvQ29sPlxyXG4gICAgICAgIDwvUm93PlxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgPHN0eWxlIGpzeD57YFxyXG4gICAgICAgIC5yb290IHtcclxuICAgICAgICAgIGhlaWdodDogMTAwJTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLm1lbnUge1xyXG4gICAgICAgICAgaGVpZ2h0OiAxMDAlO1xyXG4gICAgICAgICAgb3ZlcmZsb3cteDogaGlkZGVuO1xyXG4gICAgICAgICAgb3ZlcmZsb3cteTogYXV0bztcclxuICAgICAgICB9XHJcbiAgICAgIGB9PC9zdHlsZT5cclxuICAgIDwvZGl2PlxyXG4gICk7XHJcbn07XHJcblxyXG5TZWFyY2guZ2V0SW5pdGlhbFByb3BzID0gYXN5bmMgKHsgY3R4IH0pID0+IHtcclxuICAvLyBgaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9zZWFyY2gvcmVwb3NpdG9yaWVzP3E9JHtuYW1lfWBcclxuICBjb25zdCB7IHN0b3JlIH0gPSBjdHg7XHJcbiAgY29uc3Qgc2VhcmNoUmVwb2RhdGEgPSBhd2FpdCBnZXRBcGlEYXRhKGN0eCwgJy9hcGkvc2VhcmNoJyk7XHJcbiAgc3RvcmUuZGlzcGF0Y2goYWN0aW9ucy5nZXRTZWFyY2hSZXBvcyhzZWFyY2hSZXBvZGF0YSkpO1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgd2l0aFJvdXRlcihTZWFyY2gpO1xyXG4iXX0= */\\n/*@ sourceURL=D:\\\\\\\\360Downloads\\\\\\\\Vscode\\\\\\\\program\\\\\\\\Next-Github-App\\\\\\\\pages\\\\\\\\search.tsx */\"));\n};\n\nSearch.getInitialProps = function _callee(_ref2) {\n  var ctx, store, searchRepodata;\n  return _regeneratorRuntime.async(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          ctx = _ref2.ctx;\n          // `https://api.github.com/search/repositories?q=${name}`\n          store = ctx.store;\n          _context.next = 4;\n          return _regeneratorRuntime.awrap(getApiData(ctx, '/api/search'));\n\n        case 4:\n          searchRepodata = _context.sent;\n          store.dispatch(actions.getSearchRepos(searchRepodata));\n\n        case 6:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\n\nexport default withRouter(Search);","map":{"version":3,"sources":["D:/360Downloads/Vscode/program/Next-Github-App/pages/search.tsx"],"names":["useCallback","withRouter","Router","getApiData","actions","LANGUAGES","SORT_TYPES","name","value","order","selectedItemStyle","borderLeft","fontWeight","Search","router","query","FilterLanguageLink","item","params","lang","q","sort","path","handleLanguageClick","push","pathname","handleSortTypesClick","marginBottom","selected","getInitialProps","ctx","store","searchRepodata","dispatch","getSearchRepos"],"mappings":"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","sourcesContent":["import { useCallback } from 'react';\r\nimport { withRouter } from 'next/router';\r\nimport Router from 'next/router';\r\nimport { Row, Col, List } from 'antd';\r\n\r\nimport { getApiData } from '../server/utils.js';\r\nimport * as actions from '../actions';\r\n\r\nconst LANGUAGES = ['JavaScript', 'HTML', 'CSS', 'TypeScript', 'Java', 'Rust'];\r\nconst SORT_TYPES = [\r\n  { name: 'Best Match' },\r\n  { name: 'Most Stars', value: 'stars', order: 'dsc' },\r\n  { name: 'Fewest Stars', value: 'stars', order: 'asc' },\r\n  { name: 'Most Forks', value: 'forks', order: 'dsc' },\r\n  { name: 'Fewest Forks', value: 'forks', order: 'asc' },\r\n];\r\nconst selectedItemStyle = {\r\n  borderLeft: '2px solid #6739b6',\r\n  fontWeight: 100,\r\n};\r\n\r\ninterface Item {\r\n  name: string;\r\n  value: string;\r\n  order: string;\r\n}\r\n\r\nconst Search = ({ router }) => {\r\n  const { query } = router;\r\n\r\n  const FilterLanguageLink = (item: any) => {\r\n    let params = { ...query, ...{ lang: item } };\r\n    let { q, lang, sort, order } = params;\r\n    q = q ? `?q=${q}` : '';\r\n    lang = lang ? `&lang=${lang}` : '';\r\n    sort = sort ? `&sort=${sort}` : '';\r\n    order = order ? `&order=${order}` : '';\r\n    let path = `/search${q}${lang}${sort}${order}`;\r\n    return path;\r\n  };\r\n\r\n  const handleLanguageClick = useCallback(\r\n    (item: string) => {\r\n      Router.push({\r\n        pathname: '/search?',\r\n        query: {\r\n          q: query.q,\r\n          lang: item,\r\n          sort: query.sort,\r\n          order: query.order,\r\n        },\r\n      });\r\n    },\r\n    [query]\r\n  );\r\n\r\n  const handleSortTypesClick = useCallback(\r\n    (item: Item) => {\r\n      Router.push({\r\n        pathname: '/search',\r\n        query: {\r\n          q: query.q,\r\n          lang: query.lang,\r\n          sort: item.value,\r\n          order: item.order,\r\n        },\r\n      });\r\n    },\r\n    [query]\r\n  );\r\n\r\n  return (\r\n    <div className=\"root\">\r\n      <div className=\"menu\">\r\n        <Row gutter={20}>\r\n          <Col span={6}>\r\n            <List\r\n              bordered\r\n              header={<span className=\"list-header\">语言</span>}\r\n              style={{ marginBottom: 20 }}\r\n              dataSource={LANGUAGES}\r\n              renderItem={(item) => {\r\n                let selected = item === query.lang;\r\n                return (\r\n                  <List.Item style={selected ? selectedItemStyle : null}>\r\n                    <a href={FilterLanguageLink(item)}>{item}</a>\r\n                  </List.Item>\r\n                );\r\n              }}\r\n            />\r\n          </Col>\r\n        </Row>\r\n        <Row gutter={20}>\r\n          <Col span={6}>\r\n            <List\r\n              bordered\r\n              header={<span className=\"list-header\">排序</span>}\r\n              dataSource={SORT_TYPES}\r\n              renderItem={(item: Item) => {\r\n                let selected = false;\r\n                if (item.name === 'Best Match' && !query.sort) {\r\n                  selected = true;\r\n                } else if (\r\n                  item.value === query.sort &&\r\n                  item.order === query.order\r\n                ) {\r\n                  selected = true;\r\n                }\r\n                return (\r\n                  <List.Item style={selected ? selectedItemStyle : null}>\r\n                    <a onClick={() => handleSortTypesClick(item)}>\r\n                      {item.name}\r\n                    </a>\r\n                  </List.Item>\r\n                );\r\n              }}\r\n            />\r\n          </Col>\r\n        </Row>\r\n      </div>\r\n      <style jsx>{`\r\n        .root {\r\n          height: 100%;\r\n        }\r\n        .menu {\r\n          height: 100%;\r\n          overflow-x: hidden;\r\n          overflow-y: auto;\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n};\r\n\r\nSearch.getInitialProps = async ({ ctx }) => {\r\n  // `https://api.github.com/search/repositories?q=${name}`\r\n  const { store } = ctx;\r\n  const searchRepodata = await getApiData(ctx, '/api/search');\r\n  store.dispatch(actions.getSearchRepos(searchRepodata));\r\n};\r\n\r\nexport default withRouter(Search);\r\n"]},"metadata":{},"sourceType":"module"}