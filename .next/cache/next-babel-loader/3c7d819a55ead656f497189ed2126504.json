{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport \"antd/lib/pagination/style/css\";\nimport _Pagination from \"antd/lib/pagination\";\nimport \"antd/lib/list/style/css\";\nimport _List from \"antd/lib/list\";\nimport \"antd/lib/layout/style/css\";\nimport _Layout from \"antd/lib/layout\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { isValidElement } from 'react';\nimport { withRouter } from 'next/router';\nimport Link from 'next/link';\nimport { useSelector } from 'react-redux';\nimport { getApiData } from '../server/utils.js';\nimport * as actions from '../actions';\nimport { getLink } from '../utils';\nimport Repo from '../components/Repo';\nvar LANGUAGES = ['JavaScript', 'HTML', 'CSS', 'TypeScript', 'Java', 'Rust'];\nvar SORT_TYPES = [{\n  name: 'Best Match'\n}, {\n  name: 'Most Stars',\n  value: 'stars',\n  order: 'dsc'\n}, {\n  name: 'Fewest Stars',\n  value: 'stars',\n  order: 'asc'\n}, {\n  name: 'Most Forks',\n  value: 'forks',\n  order: 'dsc'\n}, {\n  name: 'Fewest Forks',\n  value: 'forks',\n  order: 'asc'\n}];\nvar selectedItemStyle = {\n  borderLeft: '2px solid #6739b6',\n  fontWeight: 100\n};\nvar Sider = _Layout.Sider,\n    Content = _Layout.Content;\n\nvar Search = function Search(_ref) {\n  var router = _ref.router;\n  var query = router.query;\n  var total_count = useSelector(function (state) {\n    return state.search.search_repo.total_count;\n  });\n  var items = useSelector(function (state) {\n    return state.search.search_repo.items;\n  }); // useMomo 传参失败？？？\n\n  return __jsx(\"div\", {\n    className: \"jsx-1979421917\" + \" \" + \"root\"\n  }, __jsx(_Layout, null, __jsx(Sider, null, __jsx(\"div\", {\n    className: \"jsx-1979421917\" + \" \" + \"menu\"\n  }, __jsx(_List, {\n    bordered: true,\n    header: __jsx(\"span\", {\n      className: \"jsx-1979421917\" + \" \" + \"list-header\"\n    }, \"\\u8BED\\u8A00\"),\n    style: {\n      marginBottom: 20\n    },\n    dataSource: LANGUAGES,\n    renderItem: function renderItem(item) {\n      var selected = item === query.lang;\n      return __jsx(_List.Item, {\n        style: selected ? selectedItemStyle : null\n      }, selected ? __jsx(\"span\", {\n        className: \"jsx-1979421917\"\n      }, item) : __jsx(Link, {\n        href: getLink(item, query)\n      }, __jsx(\"a\", {\n        className: \"jsx-1979421917\"\n      }, item)));\n    }\n  }), __jsx(_List, {\n    bordered: true,\n    header: __jsx(\"span\", {\n      className: \"jsx-1979421917\" + \" \" + \"list-header\"\n    }, \"\\u6392\\u5E8F\"),\n    dataSource: SORT_TYPES,\n    renderItem: function renderItem(item) {\n      var selected = false;\n\n      if (item.name === 'Best Match' && !query.sort) {\n        selected = true;\n      } else if (item.value === query.sort && item.order === query.order) {\n        selected = true;\n      }\n\n      return __jsx(_List.Item, {\n        style: selected ? selectedItemStyle : null\n      }, selected ? __jsx(\"span\", {\n        className: \"jsx-1979421917\"\n      }, item.name) : __jsx(Link, {\n        href: getLink(item, query)\n      }, __jsx(\"a\", {\n        className: \"jsx-1979421917\"\n      }, item.name)));\n    }\n  }))), __jsx(Content, null, __jsx(\"div\", {\n    className: \"jsx-1979421917\" + \" \" + \"content\"\n  }, __jsx(\"div\", {\n    className: \"jsx-1979421917\" + \" \" + \"items-warpper\"\n  }, __jsx(\"h3\", {\n    className: \"jsx-1979421917\" + \" \" + \"repos-title\"\n  }, total_count, \" \\u4E2A\\u4ED3\\u5E93\"), items ? items.map(function (item) {\n    return __jsx(Repo, {\n      repo: item,\n      key: item.id\n    });\n  }) : null), __jsx(\"div\", {\n    className: \"jsx-1979421917\" + \" \" + \"pagination\"\n  }, __jsx(_Pagination, {\n    pageSize: 30,\n    current: Number(query.page) || 1,\n    total: total_count,\n    onChange: function onChange() {},\n    itemRender: function itemRender(page, type, ol) {\n      var p = type === 'page' ? page : type === 'prev' ? page - 1 : page + 1;\n      var a = type === 'page' ? page : ol; // a 可能是 页码 p 或者 Element ...\n\n      return isValidElement(a) ? a : __jsx(\"a\", {\n        href: getLink(p, query),\n        className: \"jsx-1979421917\"\n      }, a);\n    }\n  }))))), __jsx(_JSXStyle, {\n    id: \"1979421917\"\n  }, \".root.jsx-1979421917{height:100%;}.menu.jsx-1979421917{height:100%;overflow-x:hidden;overflow-y:auto;background:#fff;}.content.jsx-1979421917{height:100%;padding-left:20px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;background:#fff;}.items-warpper.jsx-1979421917{-webkit-flex:1;-ms-flex:1;flex:1;overflow-y:auto;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6XFwzNjBEb3dubG9hZHNcXFZzY29kZVxccHJvZ3JhbVxcTmV4dC1HaXRodWItQXBwXFxwYWdlc1xcc2VhcmNoLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUF3SWtCLEFBR3VCLEFBR0EsQUFNQSxBQU9MLFlBZlQsQUFHb0IsQUFNQSxrQkFMRixBQU1ILEdBTUcsYUFYQSxHQVlsQixhQVhBLDBDQUt3Qiw4RUFDTixnQkFDbEIiLCJmaWxlIjoiRDpcXDM2MERvd25sb2Fkc1xcVnNjb2RlXFxwcm9ncmFtXFxOZXh0LUdpdGh1Yi1BcHBcXHBhZ2VzXFxzZWFyY2gudHN4Iiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaXNWYWxpZEVsZW1lbnQgfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IHdpdGhSb3V0ZXIgfSBmcm9tICduZXh0L3JvdXRlcic7XHJcbmltcG9ydCBMaW5rIGZyb20gJ25leHQvbGluayc7XHJcbmltcG9ydCB7IExheW91dCwgTGlzdCwgUGFnaW5hdGlvbiB9IGZyb20gJ2FudGQnO1xyXG5pbXBvcnQgeyB1c2VTZWxlY3RvciB9IGZyb20gJ3JlYWN0LXJlZHV4JztcclxuXHJcbmltcG9ydCB7IGdldEFwaURhdGEgfSBmcm9tICcuLi9zZXJ2ZXIvdXRpbHMuanMnO1xyXG5pbXBvcnQgKiBhcyBhY3Rpb25zIGZyb20gJy4uL2FjdGlvbnMnO1xyXG5pbXBvcnQgeyBnZXRMaW5rIH0gZnJvbSAnLi4vdXRpbHMnO1xyXG5pbXBvcnQgUmVwbyBmcm9tICcuLi9jb21wb25lbnRzL1JlcG8nO1xyXG5cclxuY29uc3QgTEFOR1VBR0VTID0gWydKYXZhU2NyaXB0JywgJ0hUTUwnLCAnQ1NTJywgJ1R5cGVTY3JpcHQnLCAnSmF2YScsICdSdXN0J107XHJcbmNvbnN0IFNPUlRfVFlQRVMgPSBbXHJcbiAgeyBuYW1lOiAnQmVzdCBNYXRjaCcgfSxcclxuICB7IG5hbWU6ICdNb3N0IFN0YXJzJywgdmFsdWU6ICdzdGFycycsIG9yZGVyOiAnZHNjJyB9LFxyXG4gIHsgbmFtZTogJ0Zld2VzdCBTdGFycycsIHZhbHVlOiAnc3RhcnMnLCBvcmRlcjogJ2FzYycgfSxcclxuICB7IG5hbWU6ICdNb3N0IEZvcmtzJywgdmFsdWU6ICdmb3JrcycsIG9yZGVyOiAnZHNjJyB9LFxyXG4gIHsgbmFtZTogJ0Zld2VzdCBGb3JrcycsIHZhbHVlOiAnZm9ya3MnLCBvcmRlcjogJ2FzYycgfSxcclxuXTtcclxuY29uc3Qgc2VsZWN0ZWRJdGVtU3R5bGUgPSB7XHJcbiAgYm9yZGVyTGVmdDogJzJweCBzb2xpZCAjNjczOWI2JyxcclxuICBmb250V2VpZ2h0OiAxMDAsXHJcbn07XHJcbmNvbnN0IHsgU2lkZXIsIENvbnRlbnQgfSA9IExheW91dDtcclxuXHJcbmludGVyZmFjZSBJdGVtIHtcclxuICBuYW1lOiBzdHJpbmc7XHJcbiAgdmFsdWU6IHN0cmluZztcclxuICBvcmRlcjogc3RyaW5nO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgUyB7XHJcbiAgc2VhcmNoPzoge1xyXG4gICAgc2VhcmNoX3JlcG86IGFueTtcclxuICB9O1xyXG59XHJcblxyXG5jb25zdCBTZWFyY2ggPSAoeyByb3V0ZXIgfSkgPT4ge1xyXG4gIGNvbnN0IHsgcXVlcnkgfSA9IHJvdXRlcjtcclxuXHJcbiAgY29uc3QgdG90YWxfY291bnQgPSB1c2VTZWxlY3RvcihcclxuICAgIChzdGF0ZTogUykgPT4gc3RhdGUuc2VhcmNoLnNlYXJjaF9yZXBvLnRvdGFsX2NvdW50XHJcbiAgKTtcclxuICBsZXQgaXRlbXMgPSB1c2VTZWxlY3Rvcigoc3RhdGU6IFMpID0+IHN0YXRlLnNlYXJjaC5zZWFyY2hfcmVwby5pdGVtcyk7XHJcbiAgLy8gdXNlTW9tbyDkvKDlj4LlpLHotKXvvJ/vvJ/vvJ9cclxuICByZXR1cm4gKFxyXG4gICAgPGRpdiBjbGFzc05hbWU9XCJyb290XCI+XHJcbiAgICAgIDxMYXlvdXQ+XHJcbiAgICAgICAgPFNpZGVyPlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtZW51XCI+XHJcbiAgICAgICAgICAgIDxMaXN0XHJcbiAgICAgICAgICAgICAgYm9yZGVyZWRcclxuICAgICAgICAgICAgICBoZWFkZXI9ezxzcGFuIGNsYXNzTmFtZT1cImxpc3QtaGVhZGVyXCI+6K+t6KiAPC9zcGFuPn1cclxuICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5Cb3R0b206IDIwIH19XHJcbiAgICAgICAgICAgICAgZGF0YVNvdXJjZT17TEFOR1VBR0VTfVxyXG4gICAgICAgICAgICAgIHJlbmRlckl0ZW09eyhpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgc2VsZWN0ZWQgPSBpdGVtID09PSBxdWVyeS5sYW5nO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgICAgPExpc3QuSXRlbSBzdHlsZT17c2VsZWN0ZWQgPyBzZWxlY3RlZEl0ZW1TdHlsZSA6IG51bGx9PlxyXG4gICAgICAgICAgICAgICAgICAgIHtzZWxlY3RlZCA/IChcclxuICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPntpdGVtfTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgICAgICAgICAgPExpbmsgaHJlZj17Z2V0TGluayhpdGVtLCBxdWVyeSl9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8YT57aXRlbX08L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8L0xpbms+XHJcbiAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgPC9MaXN0Lkl0ZW0+XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgIDxMaXN0XHJcbiAgICAgICAgICAgICAgYm9yZGVyZWRcclxuICAgICAgICAgICAgICBoZWFkZXI9ezxzcGFuIGNsYXNzTmFtZT1cImxpc3QtaGVhZGVyXCI+5o6S5bqPPC9zcGFuPn1cclxuICAgICAgICAgICAgICBkYXRhU291cmNlPXtTT1JUX1RZUEVTfVxyXG4gICAgICAgICAgICAgIHJlbmRlckl0ZW09eyhpdGVtOiBJdGVtKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgc2VsZWN0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGlmIChpdGVtLm5hbWUgPT09ICdCZXN0IE1hdGNoJyAmJiAhcXVlcnkuc29ydCkge1xyXG4gICAgICAgICAgICAgICAgICBzZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxyXG4gICAgICAgICAgICAgICAgICBpdGVtLnZhbHVlID09PSBxdWVyeS5zb3J0ICYmXHJcbiAgICAgICAgICAgICAgICAgIGl0ZW0ub3JkZXIgPT09IHF1ZXJ5Lm9yZGVyXHJcbiAgICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgICAgc2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgICAgPExpc3QuSXRlbSBzdHlsZT17c2VsZWN0ZWQgPyBzZWxlY3RlZEl0ZW1TdHlsZSA6IG51bGx9PlxyXG4gICAgICAgICAgICAgICAgICAgIHtzZWxlY3RlZCA/IChcclxuICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPntpdGVtLm5hbWV9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICkgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICA8TGluayBocmVmPXtnZXRMaW5rKGl0ZW0sIHF1ZXJ5KX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxhPntpdGVtLm5hbWV9PC9hPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPC9MaW5rPlxyXG4gICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgIDwvTGlzdC5JdGVtPlxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAvPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9TaWRlcj5cclxuICAgICAgICA8Q29udGVudD5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGVudFwiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIml0ZW1zLXdhcnBwZXJcIj5cclxuICAgICAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwicmVwb3MtdGl0bGVcIj57dG90YWxfY291bnR9IOS4quS7k+W6kzwvaDM+XHJcbiAgICAgICAgICAgICAge2l0ZW1zXHJcbiAgICAgICAgICAgICAgICA/IGl0ZW1zLm1hcCgoaXRlbTogYW55KSA9PiAoXHJcbiAgICAgICAgICAgICAgICAgICAgPFJlcG8gcmVwbz17aXRlbX0ga2V5PXtpdGVtLmlkfT48L1JlcG8+XHJcbiAgICAgICAgICAgICAgICAgICkpXHJcbiAgICAgICAgICAgICAgICA6IG51bGx9XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBhZ2luYXRpb25cIj5cclxuICAgICAgICAgICAgICA8UGFnaW5hdGlvblxyXG4gICAgICAgICAgICAgICAgcGFnZVNpemU9ezMwfVxyXG4gICAgICAgICAgICAgICAgY3VycmVudD17TnVtYmVyKHF1ZXJ5LnBhZ2UpIHx8IDF9XHJcbiAgICAgICAgICAgICAgICB0b3RhbD17dG90YWxfY291bnR9XHJcbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KCkgPT4ge319XHJcbiAgICAgICAgICAgICAgICBpdGVtUmVuZGVyPXsocGFnZSwgdHlwZSwgb2wpID0+IHtcclxuICAgICAgICAgICAgICAgICAgY29uc3QgcCA9XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZSA9PT0gJ3BhZ2UnXHJcbiAgICAgICAgICAgICAgICAgICAgICA/IHBhZ2VcclxuICAgICAgICAgICAgICAgICAgICAgIDogdHlwZSA9PT0gJ3ByZXYnXHJcbiAgICAgICAgICAgICAgICAgICAgICA/IHBhZ2UgLSAxXHJcbiAgICAgICAgICAgICAgICAgICAgICA6IHBhZ2UgKyAxO1xyXG4gICAgICAgICAgICAgICAgICBjb25zdCBhID0gdHlwZSA9PT0gJ3BhZ2UnID8gcGFnZSA6IG9sO1xyXG4gICAgICAgICAgICAgICAgICAvLyBhIOWPr+iDveaYryDpobXnoIEgcCDmiJbogIUgRWxlbWVudCAuLi5cclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIGlzVmFsaWRFbGVtZW50KGEpID8gKFxyXG4gICAgICAgICAgICAgICAgICAgIGFcclxuICAgICAgICAgICAgICAgICAgKSA6IChcclxuICAgICAgICAgICAgICAgICAgICA8YSBocmVmPXtnZXRMaW5rKHAsIHF1ZXJ5KX0+e2F9PC9hPlxyXG4gICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvQ29udGVudD5cclxuICAgICAgPC9MYXlvdXQ+XHJcblxyXG4gICAgICA8c3R5bGUganN4PntgXHJcbiAgICAgICAgLnJvb3Qge1xyXG4gICAgICAgICAgaGVpZ2h0OiAxMDAlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAubWVudSB7XHJcbiAgICAgICAgICBoZWlnaHQ6IDEwMCU7XHJcbiAgICAgICAgICBvdmVyZmxvdy14OiBoaWRkZW47XHJcbiAgICAgICAgICBvdmVyZmxvdy15OiBhdXRvO1xyXG4gICAgICAgICAgYmFja2dyb3VuZDogI2ZmZjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLmNvbnRlbnQge1xyXG4gICAgICAgICAgaGVpZ2h0OiAxMDAlO1xyXG4gICAgICAgICAgcGFkZGluZy1sZWZ0OiAyMHB4O1xyXG4gICAgICAgICAgZGlzcGxheTogZmxleDtcclxuICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbiAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmO1xyXG4gICAgICAgIH1cclxuICAgICAgICAuaXRlbXMtd2FycHBlciB7XHJcbiAgICAgICAgICBmbGV4OiAxO1xyXG4gICAgICAgICAgb3ZlcmZsb3cteTogYXV0bztcclxuICAgICAgICB9XHJcbiAgICAgIGB9PC9zdHlsZT5cclxuICAgIDwvZGl2PlxyXG4gICk7XHJcbn07XHJcblxyXG5TZWFyY2guZ2V0SW5pdGlhbFByb3BzID0gYXN5bmMgKHsgY3R4IH0pID0+IHtcclxuICAvLyBgaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9zZWFyY2gvcmVwb3NpdG9yaWVzP3E9JHtuYW1lfWBcclxuICBjb25zdCB7IHN0b3JlIH0gPSBjdHg7XHJcbiAgLy8gYXBpL3NlYXJjaFxyXG4gIGNvbnN0IHNlYXJjaFJlcG9kYXRhID0gYXdhaXQgZ2V0QXBpRGF0YShjdHgsICcvc2VhcmNoL3JlcG9zaXRvcmllcycpO1xyXG4gIHN0b3JlLmRpc3BhdGNoKGFjdGlvbnMuZ2V0U2VhcmNoUmVwb3Moc2VhcmNoUmVwb2RhdGEpKTtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHdpdGhSb3V0ZXIoU2VhcmNoKTtcclxuIl19 */\\n/*@ sourceURL=D:\\\\\\\\360Downloads\\\\\\\\Vscode\\\\\\\\program\\\\\\\\Next-Github-App\\\\\\\\pages\\\\\\\\search.tsx */\"));\n};\n\nSearch.getInitialProps = function _callee(_ref2) {\n  var ctx, store, searchRepodata;\n  return _regeneratorRuntime.async(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          ctx = _ref2.ctx;\n          // `https://api.github.com/search/repositories?q=${name}`\n          store = ctx.store; // api/search\n\n          _context.next = 4;\n          return _regeneratorRuntime.awrap(getApiData(ctx, '/search/repositories'));\n\n        case 4:\n          searchRepodata = _context.sent;\n          store.dispatch(actions.getSearchRepos(searchRepodata));\n\n        case 6:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\n\nexport default withRouter(Search);","map":{"version":3,"sources":["D:/360Downloads/Vscode/program/Next-Github-App/pages/search.tsx"],"names":["isValidElement","withRouter","Link","useSelector","getApiData","actions","getLink","Repo","LANGUAGES","SORT_TYPES","name","value","order","selectedItemStyle","borderLeft","fontWeight","Sider","Content","Search","router","query","total_count","state","search","search_repo","items","marginBottom","item","selected","lang","sort","map","id","Number","page","type","ol","p","a","getInitialProps","ctx","store","searchRepodata","dispatch","getSearchRepos"],"mappings":"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","sourcesContent":["import { isValidElement } from 'react';\r\nimport { withRouter } from 'next/router';\r\nimport Link from 'next/link';\r\nimport { Layout, List, Pagination } from 'antd';\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport { getApiData } from '../server/utils.js';\r\nimport * as actions from '../actions';\r\nimport { getLink } from '../utils';\r\nimport Repo from '../components/Repo';\r\n\r\nconst LANGUAGES = ['JavaScript', 'HTML', 'CSS', 'TypeScript', 'Java', 'Rust'];\r\nconst SORT_TYPES = [\r\n  { name: 'Best Match' },\r\n  { name: 'Most Stars', value: 'stars', order: 'dsc' },\r\n  { name: 'Fewest Stars', value: 'stars', order: 'asc' },\r\n  { name: 'Most Forks', value: 'forks', order: 'dsc' },\r\n  { name: 'Fewest Forks', value: 'forks', order: 'asc' },\r\n];\r\nconst selectedItemStyle = {\r\n  borderLeft: '2px solid #6739b6',\r\n  fontWeight: 100,\r\n};\r\nconst { Sider, Content } = Layout;\r\n\r\ninterface Item {\r\n  name: string;\r\n  value: string;\r\n  order: string;\r\n}\r\n\r\ninterface S {\r\n  search?: {\r\n    search_repo: any;\r\n  };\r\n}\r\n\r\nconst Search = ({ router }) => {\r\n  const { query } = router;\r\n\r\n  const total_count = useSelector(\r\n    (state: S) => state.search.search_repo.total_count\r\n  );\r\n  let items = useSelector((state: S) => state.search.search_repo.items);\r\n  // useMomo 传参失败？？？\r\n  return (\r\n    <div className=\"root\">\r\n      <Layout>\r\n        <Sider>\r\n          <div className=\"menu\">\r\n            <List\r\n              bordered\r\n              header={<span className=\"list-header\">语言</span>}\r\n              style={{ marginBottom: 20 }}\r\n              dataSource={LANGUAGES}\r\n              renderItem={(item) => {\r\n                let selected = item === query.lang;\r\n                return (\r\n                  <List.Item style={selected ? selectedItemStyle : null}>\r\n                    {selected ? (\r\n                      <span>{item}</span>\r\n                    ) : (\r\n                      <Link href={getLink(item, query)}>\r\n                        <a>{item}</a>\r\n                      </Link>\r\n                    )}\r\n                  </List.Item>\r\n                );\r\n              }}\r\n            />\r\n            <List\r\n              bordered\r\n              header={<span className=\"list-header\">排序</span>}\r\n              dataSource={SORT_TYPES}\r\n              renderItem={(item: Item) => {\r\n                let selected = false;\r\n                if (item.name === 'Best Match' && !query.sort) {\r\n                  selected = true;\r\n                } else if (\r\n                  item.value === query.sort &&\r\n                  item.order === query.order\r\n                ) {\r\n                  selected = true;\r\n                }\r\n                return (\r\n                  <List.Item style={selected ? selectedItemStyle : null}>\r\n                    {selected ? (\r\n                      <span>{item.name}</span>\r\n                    ) : (\r\n                      <Link href={getLink(item, query)}>\r\n                        <a>{item.name}</a>\r\n                      </Link>\r\n                    )}\r\n                  </List.Item>\r\n                );\r\n              }}\r\n            />\r\n          </div>\r\n        </Sider>\r\n        <Content>\r\n          <div className=\"content\">\r\n            <div className=\"items-warpper\">\r\n              <h3 className=\"repos-title\">{total_count} 个仓库</h3>\r\n              {items\r\n                ? items.map((item: any) => (\r\n                    <Repo repo={item} key={item.id}></Repo>\r\n                  ))\r\n                : null}\r\n            </div>\r\n            <div className=\"pagination\">\r\n              <Pagination\r\n                pageSize={30}\r\n                current={Number(query.page) || 1}\r\n                total={total_count}\r\n                onChange={() => {}}\r\n                itemRender={(page, type, ol) => {\r\n                  const p =\r\n                    type === 'page'\r\n                      ? page\r\n                      : type === 'prev'\r\n                      ? page - 1\r\n                      : page + 1;\r\n                  const a = type === 'page' ? page : ol;\r\n                  // a 可能是 页码 p 或者 Element ...\r\n                  return isValidElement(a) ? (\r\n                    a\r\n                  ) : (\r\n                    <a href={getLink(p, query)}>{a}</a>\r\n                  );\r\n                }}\r\n              />\r\n            </div>\r\n          </div>\r\n        </Content>\r\n      </Layout>\r\n\r\n      <style jsx>{`\r\n        .root {\r\n          height: 100%;\r\n        }\r\n        .menu {\r\n          height: 100%;\r\n          overflow-x: hidden;\r\n          overflow-y: auto;\r\n          background: #fff;\r\n        }\r\n        .content {\r\n          height: 100%;\r\n          padding-left: 20px;\r\n          display: flex;\r\n          flex-direction: column;\r\n          background: #fff;\r\n        }\r\n        .items-warpper {\r\n          flex: 1;\r\n          overflow-y: auto;\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n};\r\n\r\nSearch.getInitialProps = async ({ ctx }) => {\r\n  // `https://api.github.com/search/repositories?q=${name}`\r\n  const { store } = ctx;\r\n  // api/search\r\n  const searchRepodata = await getApiData(ctx, '/search/repositories');\r\n  store.dispatch(actions.getSearchRepos(searchRepodata));\r\n};\r\n\r\nexport default withRouter(Search);\r\n"]},"metadata":{},"sourceType":"module"}