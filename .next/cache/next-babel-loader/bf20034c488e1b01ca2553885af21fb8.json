{"ast":null,"code":"import \"antd/lib/pagination/style/css\";\nimport _Pagination from \"antd/lib/pagination\";\nimport \"antd/lib/list/style/css\";\nimport _List from \"antd/lib/list\";\nimport \"antd/lib/layout/style/css\";\nimport _Layout from \"antd/lib/layout\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { withRouter } from 'next/router';\nimport { useSelector } from 'react-redux';\nimport { getApiData } from '../server/utils.js';\nimport * as actions from '../actions';\nimport { getLanguageLink, getSortTypesLink } from '../utils';\nimport Repo from '../components/Repo';\nconst LANGUAGES = ['JavaScript', 'HTML', 'CSS', 'TypeScript', 'Java', 'Rust'];\nconst SORT_TYPES = [{\n  name: 'Best Match'\n}, {\n  name: 'Most Stars',\n  value: 'stars',\n  order: 'dsc'\n}, {\n  name: 'Fewest Stars',\n  value: 'stars',\n  order: 'asc'\n}, {\n  name: 'Most Forks',\n  value: 'forks',\n  order: 'dsc'\n}, {\n  name: 'Fewest Forks',\n  value: 'forks',\n  order: 'asc'\n}];\nconst selectedItemStyle = {\n  borderLeft: '2px solid #6739b6',\n  fontWeight: 100\n};\nconst {\n  Sider,\n  Content\n} = _Layout;\n\nconst Search = ({\n  router\n}) => {\n  const {\n    query\n  } = router;\n  const total_count = useSelector(state => state.home.search_repo.total_count);\n  let items = useSelector(state => state.home.search_repo.items); // useMomo 传参失败？？？\n\n  return __jsx(\"div\", {\n    className: \"jsx-1212730792\" + \" \" + \"root\"\n  }, __jsx(_Layout, null, __jsx(Sider, null, __jsx(\"div\", {\n    className: \"jsx-1212730792\" + \" \" + \"menu\"\n  }, __jsx(_List, {\n    bordered: true,\n    header: __jsx(\"span\", {\n      className: \"jsx-1212730792\" + \" \" + \"list-header\"\n    }, \"\\u8BED\\u8A00\"),\n    style: {\n      marginBottom: 20\n    },\n    dataSource: LANGUAGES,\n    renderItem: item => {\n      let selected = item === query.lang;\n      return __jsx(_List.Item, {\n        style: selected ? selectedItemStyle : null\n      }, selected ? __jsx(\"span\", {\n        className: \"jsx-1212730792\"\n      }, item) : __jsx(\"a\", {\n        href: getLanguageLink(item, query),\n        className: \"jsx-1212730792\"\n      }, item));\n    }\n  }), __jsx(_List, {\n    bordered: true,\n    header: __jsx(\"span\", {\n      className: \"jsx-1212730792\" + \" \" + \"list-header\"\n    }, \"\\u6392\\u5E8F\"),\n    dataSource: SORT_TYPES,\n    renderItem: item => {\n      let selected = false;\n\n      if (item.name === 'Best Match' && !query.sort) {\n        selected = true;\n      } else if (item.value === query.sort && item.order === query.order) {\n        selected = true;\n      }\n\n      return __jsx(_List.Item, {\n        style: selected ? selectedItemStyle : null\n      }, selected ? __jsx(\"span\", {\n        className: \"jsx-1212730792\"\n      }, item.name) : __jsx(\"a\", {\n        href: getSortTypesLink(item, query),\n        className: \"jsx-1212730792\"\n      }, item.name));\n    }\n  }))), __jsx(Content, null, __jsx(\"div\", {\n    className: \"jsx-1212730792\" + \" \" + \"content\"\n  }, __jsx(\"div\", {\n    className: \"jsx-1212730792\" + \" \" + \"items-warpper\"\n  }, __jsx(\"h3\", {\n    className: \"jsx-1212730792\" + \" \" + \"repos-title\"\n  }, total_count, \" \\u4E2A\\u4ED3\\u5E93\"), items ? items.map(item => __jsx(Repo, {\n    repo: item,\n    key: item.id\n  })) : null), __jsx(\"div\", {\n    className: \"jsx-1212730792\" + \" \" + \"pagination\"\n  }, __jsx(_Pagination, {\n    pageSize: 30,\n    current: Number(query.page) || 1,\n    total: total_count,\n    onChange: () => {}\n  }))))), __jsx(_JSXStyle, {\n    id: \"1212730792\"\n  }, \".root.jsx-1212730792{height:100%;}.menu.jsx-1212730792{height:100%;overflow-x:hidden;overflow-y:auto;}.content.jsx-1212730792{height:100%;padding-left:20px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}.items-warpper.jsx-1212730792{height:100%;-webkit-flex:1;-ms-flex:1;flex:1;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6XFwzNjBEb3dubG9hZHNcXFZzY29kZVxccHJvZ3JhbVxcTmV4dC1HaXRodWItQXBwXFxwYWdlc1xcc2VhcmNoLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFtSGtCLEFBR3VCLEFBR0EsQUFLQSxBQU1BLFlBYmQsQUFHb0IsQUFLQSxBQU1YLGtCQVZTLEFBS0gsZUFNZixDQVZBLDBEQUt3Qiw4RUFDeEIiLCJmaWxlIjoiRDpcXDM2MERvd25sb2Fkc1xcVnNjb2RlXFxwcm9ncmFtXFxOZXh0LUdpdGh1Yi1BcHBcXHBhZ2VzXFxzZWFyY2gudHN4Iiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgd2l0aFJvdXRlciB9IGZyb20gJ25leHQvcm91dGVyJztcclxuaW1wb3J0IHsgTGF5b3V0LCBMaXN0LCBQYWdpbmF0aW9uIH0gZnJvbSAnYW50ZCc7XHJcbmltcG9ydCB7IHVzZVNlbGVjdG9yIH0gZnJvbSAncmVhY3QtcmVkdXgnO1xyXG5cclxuaW1wb3J0IHsgZ2V0QXBpRGF0YSB9IGZyb20gJy4uL3NlcnZlci91dGlscy5qcyc7XHJcbmltcG9ydCAqIGFzIGFjdGlvbnMgZnJvbSAnLi4vYWN0aW9ucyc7XHJcbmltcG9ydCB7IGdldExhbmd1YWdlTGluaywgZ2V0U29ydFR5cGVzTGluayB9IGZyb20gJy4uL3V0aWxzJztcclxuaW1wb3J0IFJlcG8gZnJvbSAnLi4vY29tcG9uZW50cy9SZXBvJztcclxuXHJcbmNvbnN0IExBTkdVQUdFUyA9IFsnSmF2YVNjcmlwdCcsICdIVE1MJywgJ0NTUycsICdUeXBlU2NyaXB0JywgJ0phdmEnLCAnUnVzdCddO1xyXG5jb25zdCBTT1JUX1RZUEVTID0gW1xyXG4gIHsgbmFtZTogJ0Jlc3QgTWF0Y2gnIH0sXHJcbiAgeyBuYW1lOiAnTW9zdCBTdGFycycsIHZhbHVlOiAnc3RhcnMnLCBvcmRlcjogJ2RzYycgfSxcclxuICB7IG5hbWU6ICdGZXdlc3QgU3RhcnMnLCB2YWx1ZTogJ3N0YXJzJywgb3JkZXI6ICdhc2MnIH0sXHJcbiAgeyBuYW1lOiAnTW9zdCBGb3JrcycsIHZhbHVlOiAnZm9ya3MnLCBvcmRlcjogJ2RzYycgfSxcclxuICB7IG5hbWU6ICdGZXdlc3QgRm9ya3MnLCB2YWx1ZTogJ2ZvcmtzJywgb3JkZXI6ICdhc2MnIH0sXHJcbl07XHJcbmNvbnN0IHNlbGVjdGVkSXRlbVN0eWxlID0ge1xyXG4gIGJvcmRlckxlZnQ6ICcycHggc29saWQgIzY3MzliNicsXHJcbiAgZm9udFdlaWdodDogMTAwLFxyXG59O1xyXG5jb25zdCB7IFNpZGVyLCBDb250ZW50IH0gPSBMYXlvdXQ7XHJcblxyXG5pbnRlcmZhY2UgSXRlbSB7XHJcbiAgbmFtZTogc3RyaW5nO1xyXG4gIHZhbHVlOiBzdHJpbmc7XHJcbiAgb3JkZXI6IHN0cmluZztcclxufVxyXG5cclxuaW50ZXJmYWNlIFMge1xyXG4gIGhvbWU/OiB7XHJcbiAgICBzZWFyY2hfcmVwbzogYW55O1xyXG4gIH07XHJcbn1cclxuXHJcbmNvbnN0IFNlYXJjaCA9ICh7IHJvdXRlciB9KSA9PiB7XHJcbiAgY29uc3QgeyBxdWVyeSB9ID0gcm91dGVyO1xyXG5cclxuICBjb25zdCB0b3RhbF9jb3VudCA9IHVzZVNlbGVjdG9yKFxyXG4gICAgKHN0YXRlOiBTKSA9PiBzdGF0ZS5ob21lLnNlYXJjaF9yZXBvLnRvdGFsX2NvdW50XHJcbiAgKTtcclxuICBsZXQgaXRlbXMgPSB1c2VTZWxlY3Rvcigoc3RhdGU6IFMpID0+IHN0YXRlLmhvbWUuc2VhcmNoX3JlcG8uaXRlbXMpO1xyXG4gIC8vIHVzZU1vbW8g5Lyg5Y+C5aSx6LSl77yf77yf77yfXHJcbiAgcmV0dXJuIChcclxuICAgIDxkaXYgY2xhc3NOYW1lPVwicm9vdFwiPlxyXG4gICAgICA8TGF5b3V0PlxyXG4gICAgICAgIDxTaWRlcj5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWVudVwiPlxyXG4gICAgICAgICAgICA8TGlzdFxyXG4gICAgICAgICAgICAgIGJvcmRlcmVkXHJcbiAgICAgICAgICAgICAgaGVhZGVyPXs8c3BhbiBjbGFzc05hbWU9XCJsaXN0LWhlYWRlclwiPuivreiogDwvc3Bhbj59XHJcbiAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luQm90dG9tOiAyMCB9fVxyXG4gICAgICAgICAgICAgIGRhdGFTb3VyY2U9e0xBTkdVQUdFU31cclxuICAgICAgICAgICAgICByZW5kZXJJdGVtPXsoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IHNlbGVjdGVkID0gaXRlbSA9PT0gcXVlcnkubGFuZztcclxuICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgIDxMaXN0Lkl0ZW0gc3R5bGU9e3NlbGVjdGVkID8gc2VsZWN0ZWRJdGVtU3R5bGUgOiBudWxsfT5cclxuICAgICAgICAgICAgICAgICAgICB7c2VsZWN0ZWQgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj57aXRlbX08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgKSA6IChcclxuICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9e2dldExhbmd1YWdlTGluayhpdGVtLCBxdWVyeSl9PntpdGVtfTwvYT5cclxuICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICA8L0xpc3QuSXRlbT5cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgPExpc3RcclxuICAgICAgICAgICAgICBib3JkZXJlZFxyXG4gICAgICAgICAgICAgIGhlYWRlcj17PHNwYW4gY2xhc3NOYW1lPVwibGlzdC1oZWFkZXJcIj7mjpLluo88L3NwYW4+fVxyXG4gICAgICAgICAgICAgIGRhdGFTb3VyY2U9e1NPUlRfVFlQRVN9XHJcbiAgICAgICAgICAgICAgcmVuZGVySXRlbT17KGl0ZW06IEl0ZW0pID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBzZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0ubmFtZSA9PT0gJ0Jlc3QgTWF0Y2gnICYmICFxdWVyeS5zb3J0KSB7XHJcbiAgICAgICAgICAgICAgICAgIHNlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXHJcbiAgICAgICAgICAgICAgICAgIGl0ZW0udmFsdWUgPT09IHF1ZXJ5LnNvcnQgJiZcclxuICAgICAgICAgICAgICAgICAgaXRlbS5vcmRlciA9PT0gcXVlcnkub3JkZXJcclxuICAgICAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgICBzZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgICA8TGlzdC5JdGVtIHN0eWxlPXtzZWxlY3RlZCA/IHNlbGVjdGVkSXRlbVN0eWxlIDogbnVsbH0+XHJcbiAgICAgICAgICAgICAgICAgICAge3NlbGVjdGVkID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgPHNwYW4+e2l0ZW0ubmFtZX08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgKSA6IChcclxuICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9e2dldFNvcnRUeXBlc0xpbmsoaXRlbSwgcXVlcnkpfT57aXRlbS5uYW1lfTwvYT5cclxuICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICA8L0xpc3QuSXRlbT5cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgLz5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvU2lkZXI+XHJcbiAgICAgICAgPENvbnRlbnQ+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRlbnRcIj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJpdGVtcy13YXJwcGVyXCI+XHJcbiAgICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT1cInJlcG9zLXRpdGxlXCI+e3RvdGFsX2NvdW50fSDkuKrku5PlupM8L2gzPlxyXG4gICAgICAgICAgICAgIHtpdGVtc1xyXG4gICAgICAgICAgICAgICAgPyBpdGVtcy5tYXAoKGl0ZW06IGFueSkgPT4gKFxyXG4gICAgICAgICAgICAgICAgICAgIDxSZXBvIHJlcG89e2l0ZW19IGtleT17aXRlbS5pZH0+PC9SZXBvPlxyXG4gICAgICAgICAgICAgICAgICApKVxyXG4gICAgICAgICAgICAgICAgOiBudWxsfVxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwYWdpbmF0aW9uXCI+XHJcbiAgICAgICAgICAgICAgPFBhZ2luYXRpb25cclxuICAgICAgICAgICAgICAgIHBhZ2VTaXplPXszMH1cclxuICAgICAgICAgICAgICAgIGN1cnJlbnQ9e051bWJlcihxdWVyeS5wYWdlKSB8fCAxfVxyXG4gICAgICAgICAgICAgICAgdG90YWw9e3RvdGFsX2NvdW50fVxyXG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9eygpID0+IHt9fVxyXG4gICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9Db250ZW50PlxyXG4gICAgICA8L0xheW91dD5cclxuXHJcbiAgICAgIDxzdHlsZSBqc3g+e2BcclxuICAgICAgICAucm9vdCB7XHJcbiAgICAgICAgICBoZWlnaHQ6IDEwMCU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC5tZW51IHtcclxuICAgICAgICAgIGhlaWdodDogMTAwJTtcclxuICAgICAgICAgIG92ZXJmbG93LXg6IGhpZGRlbjtcclxuICAgICAgICAgIG92ZXJmbG93LXk6IGF1dG87XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC5jb250ZW50IHtcclxuICAgICAgICAgIGhlaWdodDogMTAwJTtcclxuICAgICAgICAgIHBhZGRpbmctbGVmdDogMjBweDtcclxuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gICAgICAgIH1cclxuICAgICAgICAuaXRlbXMtd2FycHBlciB7XHJcbiAgICAgICAgICBoZWlnaHQ6IDEwMCU7XHJcbiAgICAgICAgICBmbGV4OiAxO1xyXG4gICAgICAgIH1cclxuICAgICAgYH08L3N0eWxlPlxyXG4gICAgPC9kaXY+XHJcbiAgKTtcclxufTtcclxuXHJcblNlYXJjaC5nZXRJbml0aWFsUHJvcHMgPSBhc3luYyAoeyBjdHggfSkgPT4ge1xyXG4gIC8vIGBodHRwczovL2FwaS5naXRodWIuY29tL3NlYXJjaC9yZXBvc2l0b3JpZXM/cT0ke25hbWV9YFxyXG4gIGNvbnN0IHsgc3RvcmUgfSA9IGN0eDtcclxuICBjb25zdCBzZWFyY2hSZXBvZGF0YSA9IGF3YWl0IGdldEFwaURhdGEoY3R4LCAnL2FwaS9zZWFyY2gnKTtcclxuICBzdG9yZS5kaXNwYXRjaChhY3Rpb25zLmdldFNlYXJjaFJlcG9zKHNlYXJjaFJlcG9kYXRhKSk7XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCB3aXRoUm91dGVyKFNlYXJjaCk7XHJcbiJdfQ== */\\n/*@ sourceURL=D:\\\\\\\\360Downloads\\\\\\\\Vscode\\\\\\\\program\\\\\\\\Next-Github-App\\\\\\\\pages\\\\\\\\search.tsx */\"));\n};\n\nSearch.getInitialProps = async ({\n  ctx\n}) => {\n  // `https://api.github.com/search/repositories?q=${name}`\n  const {\n    store\n  } = ctx;\n  const searchRepodata = await getApiData(ctx, '/api/search');\n  store.dispatch(actions.getSearchRepos(searchRepodata));\n};\n\nexport default withRouter(Search);","map":{"version":3,"sources":["D:/360Downloads/Vscode/program/Next-Github-App/pages/search.tsx"],"names":["withRouter","useSelector","getApiData","actions","getLanguageLink","getSortTypesLink","Repo","LANGUAGES","SORT_TYPES","name","value","order","selectedItemStyle","borderLeft","fontWeight","Sider","Content","Search","router","query","total_count","state","home","search_repo","items","marginBottom","item","selected","lang","sort","map","id","Number","page","getInitialProps","ctx","store","searchRepodata","dispatch","getSearchRepos"],"mappings":"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","sourcesContent":["import { withRouter } from 'next/router';\r\nimport { Layout, List, Pagination } from 'antd';\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport { getApiData } from '../server/utils.js';\r\nimport * as actions from '../actions';\r\nimport { getLanguageLink, getSortTypesLink } from '../utils';\r\nimport Repo from '../components/Repo';\r\n\r\nconst LANGUAGES = ['JavaScript', 'HTML', 'CSS', 'TypeScript', 'Java', 'Rust'];\r\nconst SORT_TYPES = [\r\n  { name: 'Best Match' },\r\n  { name: 'Most Stars', value: 'stars', order: 'dsc' },\r\n  { name: 'Fewest Stars', value: 'stars', order: 'asc' },\r\n  { name: 'Most Forks', value: 'forks', order: 'dsc' },\r\n  { name: 'Fewest Forks', value: 'forks', order: 'asc' },\r\n];\r\nconst selectedItemStyle = {\r\n  borderLeft: '2px solid #6739b6',\r\n  fontWeight: 100,\r\n};\r\nconst { Sider, Content } = Layout;\r\n\r\ninterface Item {\r\n  name: string;\r\n  value: string;\r\n  order: string;\r\n}\r\n\r\ninterface S {\r\n  home?: {\r\n    search_repo: any;\r\n  };\r\n}\r\n\r\nconst Search = ({ router }) => {\r\n  const { query } = router;\r\n\r\n  const total_count = useSelector(\r\n    (state: S) => state.home.search_repo.total_count\r\n  );\r\n  let items = useSelector((state: S) => state.home.search_repo.items);\r\n  // useMomo 传参失败？？？\r\n  return (\r\n    <div className=\"root\">\r\n      <Layout>\r\n        <Sider>\r\n          <div className=\"menu\">\r\n            <List\r\n              bordered\r\n              header={<span className=\"list-header\">语言</span>}\r\n              style={{ marginBottom: 20 }}\r\n              dataSource={LANGUAGES}\r\n              renderItem={(item) => {\r\n                let selected = item === query.lang;\r\n                return (\r\n                  <List.Item style={selected ? selectedItemStyle : null}>\r\n                    {selected ? (\r\n                      <span>{item}</span>\r\n                    ) : (\r\n                      <a href={getLanguageLink(item, query)}>{item}</a>\r\n                    )}\r\n                  </List.Item>\r\n                );\r\n              }}\r\n            />\r\n            <List\r\n              bordered\r\n              header={<span className=\"list-header\">排序</span>}\r\n              dataSource={SORT_TYPES}\r\n              renderItem={(item: Item) => {\r\n                let selected = false;\r\n                if (item.name === 'Best Match' && !query.sort) {\r\n                  selected = true;\r\n                } else if (\r\n                  item.value === query.sort &&\r\n                  item.order === query.order\r\n                ) {\r\n                  selected = true;\r\n                }\r\n                return (\r\n                  <List.Item style={selected ? selectedItemStyle : null}>\r\n                    {selected ? (\r\n                      <span>{item.name}</span>\r\n                    ) : (\r\n                      <a href={getSortTypesLink(item, query)}>{item.name}</a>\r\n                    )}\r\n                  </List.Item>\r\n                );\r\n              }}\r\n            />\r\n          </div>\r\n        </Sider>\r\n        <Content>\r\n          <div className=\"content\">\r\n            <div className=\"items-warpper\">\r\n              <h3 className=\"repos-title\">{total_count} 个仓库</h3>\r\n              {items\r\n                ? items.map((item: any) => (\r\n                    <Repo repo={item} key={item.id}></Repo>\r\n                  ))\r\n                : null}\r\n            </div>\r\n            <div className=\"pagination\">\r\n              <Pagination\r\n                pageSize={30}\r\n                current={Number(query.page) || 1}\r\n                total={total_count}\r\n                onChange={() => {}}\r\n              />\r\n            </div>\r\n          </div>\r\n        </Content>\r\n      </Layout>\r\n\r\n      <style jsx>{`\r\n        .root {\r\n          height: 100%;\r\n        }\r\n        .menu {\r\n          height: 100%;\r\n          overflow-x: hidden;\r\n          overflow-y: auto;\r\n        }\r\n        .content {\r\n          height: 100%;\r\n          padding-left: 20px;\r\n          display: flex;\r\n          flex-direction: column;\r\n        }\r\n        .items-warpper {\r\n          height: 100%;\r\n          flex: 1;\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n};\r\n\r\nSearch.getInitialProps = async ({ ctx }) => {\r\n  // `https://api.github.com/search/repositories?q=${name}`\r\n  const { store } = ctx;\r\n  const searchRepodata = await getApiData(ctx, '/api/search');\r\n  store.dispatch(actions.getSearchRepos(searchRepodata));\r\n};\r\n\r\nexport default withRouter(Search);\r\n"]},"metadata":{},"sourceType":"module"}