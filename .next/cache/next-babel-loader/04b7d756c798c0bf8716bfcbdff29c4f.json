{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport \"antd/lib/tabs/style/css\";\nimport _Tabs from \"antd/lib/tabs\";\nimport \"antd/lib/button/style/css\";\nimport _Button from \"antd/lib/button\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useSelector } from 'react-redux'; //import Link from 'next/link';\n\nimport { MailOutlined } from '@ant-design/icons';\nimport * as actions from '../actions'; //import post from '../axios';\n\nimport { getApiData } from '../server/utils.js';\nimport { OAUTH_URL } from '../config.js';\nimport Repo from '../components/Repo';\n\nvar Index = function Index() {\n  var _useSelector = useSelector(function (state) {\n    return state.user;\n  }),\n      id = _useSelector.id,\n      avatar_url = _useSelector.avatar_url,\n      login = _useSelector.login,\n      name = _useSelector.name,\n      bio = _useSelector.bio,\n      email = _useSelector.email;\n\n  var userRepo = useSelector(function (state) {\n    return state.home.user_repo;\n  });\n  var userStarredRepo = useSelector(function (state) {\n    return state.home.user_starred_repo;\n  });\n  return __jsx(React.Fragment, null, !id ? __jsx(\"div\", {\n    className: \"jsx-3997980741\" + \" \" + \"root\"\n  }, __jsx(_Button, {\n    type: \"primary\",\n    href: OAUTH_URL\n  }, \"\\u70B9\\u51FB\\u767B\\u5F55\")) : __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: \"jsx-3997980741\" + \" \" + \"user-info\"\n  }, __jsx(\"img\", {\n    src: avatar_url,\n    alt: \"\",\n    className: \"jsx-3997980741\" + \" \" + \"avatar\"\n  }), __jsx(\"span\", {\n    className: \"jsx-3997980741\" + \" \" + \"login\"\n  }, login), name ? __jsx(\"span\", {\n    className: \"jsx-3997980741\" + \" \" + \"name\"\n  }, name) : null, bio ? __jsx(\"span\", {\n    className: \"jsx-3997980741\" + \" \" + \"bio\"\n  }, bio) : null, email ? __jsx(\"p\", {\n    className: \"jsx-3997980741\" + \" \" + \"email\"\n  }, __jsx(MailOutlined, {\n    style: {\n      marginRight: 10\n    }\n  }), __jsx(\"a\", {\n    href: \"mailto:\".concat(email),\n    className: \"jsx-3997980741\"\n  }, email)) : null), __jsx(\"div\", {\n    className: \"jsx-3997980741\" + \" \" + \"user-repo\"\n  }, __jsx(_Tabs, {\n    defaultActiveKey: \"1\",\n    animated: false\n  }, __jsx(_Tabs.TabPane, {\n    tab: \"\\u4F60\\u7684\\u4ED3\\u5E93\",\n    key: \"0\"\n  }, userRepo.map(function (item) {\n    return __jsx(Repo, {\n      repo: item,\n      key: item.id\n    });\n  })), __jsx(_Tabs.TabPane, {\n    tab: \"\\u6536\\u85CF\\u7684\\u4ED3\\u5E93\",\n    key: \"1\"\n  }, userStarredRepo.map(function (item) {\n    return __jsx(Repo, {\n      repo: item,\n      key: item.id\n    });\n  }))))), __jsx(_JSXStyle, {\n    id: \"3997980741\"\n  }, \".root.jsx-3997980741{width:100%;height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.user-info.jsx-3997980741{width:200px;margin-right:40px;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}.avatar.jsx-3997980741{width:100%;border-radius:5px;}.login.jsx-3997980741{font-weight:300;font-size:20px;margin-top:20px;color:#666;}.name.jsx-3997980741{margin-top:20px;font-size:16px;color:#777;}.bio.jsx-3997980741{margin-top:20px;color:#333;}.email.jsx-3997980741{margin-top:20px;}.user-repo.jsx-3997980741{width:100%;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6XFwzNjBEb3dubG9hZHNcXFZzY29kZVxccHJvZ3JhbVxcTmV4dC1HaXRodWItQXBwXFxwYWdlc1xcaW5kZXgudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQThFUyxBQUd3QixBQU9DLEFBT0QsQUFJSyxBQU1BLEFBS0EsQUFJQSxBQUdMLFdBbkNDLEFBY00sQUFzQnBCLENBN0JvQixJQVdILEFBTUEsQUFLSixBQUliLE9BaENlLElBNkJmLEVBZkEsQ0FQZ0IsQ0FXRSxBQU1MLFdBQ2IsS0FOYSxXQUNiLDRCQVplLFdBUFUsK0RBUUQsb0NBUEgsMENBUXJCLG1EQVBBIiwiZmlsZSI6IkQ6XFwzNjBEb3dubG9hZHNcXFZzY29kZVxccHJvZ3JhbVxcTmV4dC1HaXRodWItQXBwXFxwYWdlc1xcaW5kZXgudHN4Iiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlU2VsZWN0b3IgfSBmcm9tICdyZWFjdC1yZWR1eCc7XHJcbi8vaW1wb3J0IExpbmsgZnJvbSAnbmV4dC9saW5rJztcclxuaW1wb3J0IHsgQnV0dG9uLCBUYWJzIH0gZnJvbSAnYW50ZCc7XHJcbmltcG9ydCB7IE1haWxPdXRsaW5lZCB9IGZyb20gJ0BhbnQtZGVzaWduL2ljb25zJztcclxuXHJcbmltcG9ydCAqIGFzIGFjdGlvbnMgZnJvbSAnLi4vYWN0aW9ucyc7XHJcbi8vaW1wb3J0IHBvc3QgZnJvbSAnLi4vYXhpb3MnO1xyXG5pbXBvcnQgeyBnZXRBcGlEYXRhIH0gZnJvbSAnLi4vc2VydmVyL3V0aWxzLmpzJztcclxuaW1wb3J0IHsgT0FVVEhfVVJMIH0gZnJvbSAnLi4vY29uZmlnLmpzJztcclxuaW1wb3J0IFJlcG8gZnJvbSAnLi4vY29tcG9uZW50cy9SZXBvJztcclxuXHJcbmludGVyZmFjZSB1c2VyU3RhdGUge1xyXG4gIHVzZXI6IHtcclxuICAgIGlkOiBudW1iZXI7XHJcbiAgICBhdmF0YXJfdXJsOiBzdHJpbmc7XHJcbiAgICBsb2dpbjogc3RyaW5nO1xyXG4gICAgbmFtZTogc3RyaW5nO1xyXG4gICAgYmlvOiBzdHJpbmc7XHJcbiAgICBlbWFpbDogc3RyaW5nO1xyXG4gIH07XHJcbn1cclxuXHJcbmludGVyZmFjZSBob21lU3RhdGUge1xyXG4gIGhvbWU6IHtcclxuICAgIHVzZXJfcmVwbzogYW55O1xyXG4gICAgdXNlcl9zdGFycmVkX3JlcG86IGFueTtcclxuICB9O1xyXG59XHJcblxyXG5jb25zdCBJbmRleCA9ICgpID0+IHtcclxuICBjb25zdCB7IGlkLCBhdmF0YXJfdXJsLCBsb2dpbiwgbmFtZSwgYmlvLCBlbWFpbCB9ID0gdXNlU2VsZWN0b3IoXHJcbiAgICAoc3RhdGU6IHVzZXJTdGF0ZSkgPT4gc3RhdGUudXNlclxyXG4gICk7XHJcbiAgY29uc3QgdXNlclJlcG8gPSB1c2VTZWxlY3Rvcigoc3RhdGU6IGhvbWVTdGF0ZSkgPT4gc3RhdGUuaG9tZS51c2VyX3JlcG8pO1xyXG4gIGNvbnN0IHVzZXJTdGFycmVkUmVwbyA9IHVzZVNlbGVjdG9yKFxyXG4gICAgKHN0YXRlOiBob21lU3RhdGUpID0+IHN0YXRlLmhvbWUudXNlcl9zdGFycmVkX3JlcG9cclxuICApO1xyXG4gIHJldHVybiAoXHJcbiAgICA8PlxyXG4gICAgICB7IWlkID8gKFxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm9vdFwiPlxyXG4gICAgICAgICAgPEJ1dHRvbiB0eXBlPVwicHJpbWFyeVwiIGhyZWY9e09BVVRIX1VSTH0+XHJcbiAgICAgICAgICAgIOeCueWHu+eZu+W9lVxyXG4gICAgICAgICAgPC9CdXR0b24+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICkgOiAoXHJcbiAgICAgICAgPD5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidXNlci1pbmZvXCI+XHJcbiAgICAgICAgICAgIDxpbWcgc3JjPXthdmF0YXJfdXJsfSBhbHQ9XCJcIiBjbGFzc05hbWU9XCJhdmF0YXJcIiAvPlxyXG4gICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJsb2dpblwiPntsb2dpbn08L3NwYW4+XHJcbiAgICAgICAgICAgIHtuYW1lID8gPHNwYW4gY2xhc3NOYW1lPVwibmFtZVwiPntuYW1lfTwvc3Bhbj4gOiBudWxsfVxyXG4gICAgICAgICAgICB7YmlvID8gPHNwYW4gY2xhc3NOYW1lPVwiYmlvXCI+e2Jpb308L3NwYW4+IDogbnVsbH1cclxuICAgICAgICAgICAge2VtYWlsID8gKFxyXG4gICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cImVtYWlsXCI+XHJcbiAgICAgICAgICAgICAgICA8TWFpbE91dGxpbmVkIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiAxMCB9fSAvPlxyXG4gICAgICAgICAgICAgICAgPGEgaHJlZj17YG1haWx0bzoke2VtYWlsfWB9PntlbWFpbH08L2E+XHJcbiAgICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ1c2VyLXJlcG9cIj5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIDxUYWJzIGRlZmF1bHRBY3RpdmVLZXk9XCIxXCIgYW5pbWF0ZWQ9e2ZhbHNlfT5cclxuICAgICAgICAgICAgICAgIDxUYWJzLlRhYlBhbmUgdGFiPVwi5L2g55qE5LuT5bqTXCIga2V5PVwiMFwiPlxyXG4gICAgICAgICAgICAgICAgICB7dXNlclJlcG8ubWFwKChpdGVtOiBhbnkpID0+IChcclxuICAgICAgICAgICAgICAgICAgICA8UmVwbyByZXBvPXtpdGVtfSBrZXk9e2l0ZW0uaWR9IC8+XHJcbiAgICAgICAgICAgICAgICAgICkpfVxyXG4gICAgICAgICAgICAgICAgPC9UYWJzLlRhYlBhbmU+XHJcbiAgICAgICAgICAgICAgICA8VGFicy5UYWJQYW5lIHRhYj1cIuaUtuiXj+eahOS7k+W6k1wiIGtleT1cIjFcIj5cclxuICAgICAgICAgICAgICAgICAge3VzZXJTdGFycmVkUmVwby5tYXAoKGl0ZW06IGFueSkgPT4gKFxyXG4gICAgICAgICAgICAgICAgICAgIDxSZXBvIHJlcG89e2l0ZW19IGtleT17aXRlbS5pZH0gLz5cclxuICAgICAgICAgICAgICAgICAgKSl9XHJcbiAgICAgICAgICAgICAgICA8L1RhYnMuVGFiUGFuZT5cclxuICAgICAgICAgICAgICA8L1RhYnM+XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvPlxyXG4gICAgICApfVxyXG4gICAgICA8c3R5bGUganN4PlxyXG4gICAgICAgIHtgXHJcbiAgICAgICAgICAucm9vdCB7XHJcbiAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XHJcbiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG4gICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgLnVzZXItaW5mbyB7XHJcbiAgICAgICAgICAgIHdpZHRoOiAyMDBweDtcclxuICAgICAgICAgICAgbWFyZ2luLXJpZ2h0OiA0MHB4O1xyXG4gICAgICAgICAgICBmbGV4LXNocmluazogMDtcclxuICAgICAgICAgICAgZGlzcGxheTogZmxleDtcclxuICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIC5hdmF0YXIge1xyXG4gICAgICAgICAgICB3aWR0aDogMTAwJTtcclxuICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4O1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgLmxvZ2luIHtcclxuICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDMwMDtcclxuICAgICAgICAgICAgZm9udC1zaXplOiAyMHB4O1xyXG4gICAgICAgICAgICBtYXJnaW4tdG9wOiAyMHB4O1xyXG4gICAgICAgICAgICBjb2xvcjogIzY2NjtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIC5uYW1lIHtcclxuICAgICAgICAgICAgbWFyZ2luLXRvcDogMjBweDtcclxuICAgICAgICAgICAgZm9udC1zaXplOiAxNnB4O1xyXG4gICAgICAgICAgICBjb2xvcjogIzc3NztcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIC5iaW8ge1xyXG4gICAgICAgICAgICBtYXJnaW4tdG9wOiAyMHB4O1xyXG4gICAgICAgICAgICBjb2xvcjogIzMzMztcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIC5lbWFpbCB7XHJcbiAgICAgICAgICAgIG1hcmdpbi10b3A6IDIwcHg7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAudXNlci1yZXBvIHtcclxuICAgICAgICAgICAgd2lkdGg6IDEwMCU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgYH1cclxuICAgICAgPC9zdHlsZT5cclxuICAgIDwvPlxyXG4gICk7XHJcbn07XHJcblxyXG5JbmRleC5nZXRJbml0aWFsUHJvcHMgPSBhc3luYyAoeyBjdHggfSkgPT4ge1xyXG4gIC8vIOivt+axgiBnaXRodWIg5pWw5o2u77yM5Zug5Li65LiN6IO95pq06ZyyIHRva2Vu77yM5bCG6K+35rGC5Luj55CG5Yiw5pyN5Yqh5ZmoXHJcbiAgLy8g5pyN5Yqh5Zmo5riy5p+T6buY6K6k56uv5Y+j5Li6IDgwXHJcbiAgY29uc3QgeyBzdG9yZSB9ID0gY3R4O1xyXG4gIC8qXHJcbiAgY29uc3QgcmVwb0RhdGEgPSBhd2FpdCBnZXRBcGlEYXRhKGN0eCwgJy9hcGkvcmVwb3NpdG9yeScpO1xyXG4gIHN0b3JlLmRpc3BhdGNoKGFjdGlvbnMuZ2V0R2l0aHViUmVwb3NpdG9yeShyZXBvRGF0YSkpO1xyXG4gICovXHJcbiAgLyogIOafpeeci+eUqOaIt+S7k+W6k+S/oeaBr+mcgOWFiOeZu+W9lVxyXG4gIGNvbnN0IGlkID0gc3RvcmUuZ2V0U3RhdGUoKS51c2VyLmlkO1xyXG4gIGlmKCFpZCkge1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuICAqL1xyXG4gIGNvbnN0IHVzZXJSZXBvRGF0YSA9IGF3YWl0IGdldEFwaURhdGEoY3R4LCAnL2FwaS91c2VyL3JlcG9zJyk7XHJcbiAgc3RvcmUuZGlzcGF0Y2goYWN0aW9ucy5nZXRVc2VyUmVwb3ModXNlclJlcG9EYXRhKSk7XHJcbiAgY29uc3QgdXNlclN0YXJyZWRSZXBvRGF0YSA9IGF3YWl0IGdldEFwaURhdGEoY3R4LCAnL2FwaS91c2VyL3N0YXJyZWQnKTtcclxuICBzdG9yZS5kaXNwYXRjaChhY3Rpb25zLmdldFVzZXJSZXBvcyh1c2VyU3RhcnJlZFJlcG9EYXRhKSk7XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBJbmRleDtcclxuIl19 */\\n/*@ sourceURL=D:\\\\\\\\360Downloads\\\\\\\\Vscode\\\\\\\\program\\\\\\\\Next-Github-App\\\\\\\\pages\\\\\\\\index.tsx */\"));\n};\n\nIndex.getInitialProps = function _callee(_ref) {\n  var ctx, store, userRepoData, userStarredRepoData;\n  return _regeneratorRuntime.async(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          ctx = _ref.ctx;\n          // 请求 github 数据，因为不能暴露 token，将请求代理到服务器\n          // 服务器渲染默认端口为 80\n          store = ctx.store;\n          /*\r\n          const repoData = await getApiData(ctx, '/api/repository');\r\n          store.dispatch(actions.getGithubRepository(repoData));\r\n          */\n\n          /*  查看用户仓库信息需先登录\r\n          const id = store.getState().user.id;\r\n          if(!id) {\r\n            return;\r\n          }\r\n          */\n\n          _context.next = 4;\n          return _regeneratorRuntime.awrap(getApiData(ctx, '/api/user/repos'));\n\n        case 4:\n          userRepoData = _context.sent;\n          store.dispatch(actions.getUserRepos(userRepoData));\n          _context.next = 8;\n          return _regeneratorRuntime.awrap(getApiData(ctx, '/api/user/starred'));\n\n        case 8:\n          userStarredRepoData = _context.sent;\n          store.dispatch(actions.getUserRepos(userStarredRepoData));\n\n        case 10:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\n\nexport default Index;","map":{"version":3,"sources":["D:/360Downloads/Vscode/program/Next-Github-App/pages/index.tsx"],"names":["useSelector","MailOutlined","actions","getApiData","OAUTH_URL","Repo","Index","state","user","id","avatar_url","login","name","bio","email","userRepo","home","user_repo","userStarredRepo","user_starred_repo","marginRight","map","item","getInitialProps","ctx","store","userRepoData","dispatch","getUserRepos","userStarredRepoData"],"mappings":"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","sourcesContent":["import { useSelector } from 'react-redux';\r\n//import Link from 'next/link';\r\nimport { Button, Tabs } from 'antd';\r\nimport { MailOutlined } from '@ant-design/icons';\r\n\r\nimport * as actions from '../actions';\r\n//import post from '../axios';\r\nimport { getApiData } from '../server/utils.js';\r\nimport { OAUTH_URL } from '../config.js';\r\nimport Repo from '../components/Repo';\r\n\r\ninterface userState {\r\n  user: {\r\n    id: number;\r\n    avatar_url: string;\r\n    login: string;\r\n    name: string;\r\n    bio: string;\r\n    email: string;\r\n  };\r\n}\r\n\r\ninterface homeState {\r\n  home: {\r\n    user_repo: any;\r\n    user_starred_repo: any;\r\n  };\r\n}\r\n\r\nconst Index = () => {\r\n  const { id, avatar_url, login, name, bio, email } = useSelector(\r\n    (state: userState) => state.user\r\n  );\r\n  const userRepo = useSelector((state: homeState) => state.home.user_repo);\r\n  const userStarredRepo = useSelector(\r\n    (state: homeState) => state.home.user_starred_repo\r\n  );\r\n  return (\r\n    <>\r\n      {!id ? (\r\n        <div className=\"root\">\r\n          <Button type=\"primary\" href={OAUTH_URL}>\r\n            点击登录\r\n          </Button>\r\n        </div>\r\n      ) : (\r\n        <>\r\n          <div className=\"user-info\">\r\n            <img src={avatar_url} alt=\"\" className=\"avatar\" />\r\n            <span className=\"login\">{login}</span>\r\n            {name ? <span className=\"name\">{name}</span> : null}\r\n            {bio ? <span className=\"bio\">{bio}</span> : null}\r\n            {email ? (\r\n              <p className=\"email\">\r\n                <MailOutlined style={{ marginRight: 10 }} />\r\n                <a href={`mailto:${email}`}>{email}</a>\r\n              </p>\r\n            ) : null}\r\n          </div>\r\n          <div className=\"user-repo\">\r\n            {\r\n              <Tabs defaultActiveKey=\"1\" animated={false}>\r\n                <Tabs.TabPane tab=\"你的仓库\" key=\"0\">\r\n                  {userRepo.map((item: any) => (\r\n                    <Repo repo={item} key={item.id} />\r\n                  ))}\r\n                </Tabs.TabPane>\r\n                <Tabs.TabPane tab=\"收藏的仓库\" key=\"1\">\r\n                  {userStarredRepo.map((item: any) => (\r\n                    <Repo repo={item} key={item.id} />\r\n                  ))}\r\n                </Tabs.TabPane>\r\n              </Tabs>\r\n            }\r\n          </div>\r\n        </>\r\n      )}\r\n      <style jsx>\r\n        {`\r\n          .root {\r\n            width: 100%;\r\n            height: 100%;\r\n            display: flex;\r\n            justify-content: center;\r\n            align-items: center;\r\n          }\r\n          .user-info {\r\n            width: 200px;\r\n            margin-right: 40px;\r\n            flex-shrink: 0;\r\n            display: flex;\r\n            flex-direction: column;\r\n          }\r\n          .avatar {\r\n            width: 100%;\r\n            border-radius: 5px;\r\n          }\r\n          .login {\r\n            font-weight: 300;\r\n            font-size: 20px;\r\n            margin-top: 20px;\r\n            color: #666;\r\n          }\r\n          .name {\r\n            margin-top: 20px;\r\n            font-size: 16px;\r\n            color: #777;\r\n          }\r\n          .bio {\r\n            margin-top: 20px;\r\n            color: #333;\r\n          }\r\n          .email {\r\n            margin-top: 20px;\r\n          }\r\n          .user-repo {\r\n            width: 100%;\r\n          }\r\n        `}\r\n      </style>\r\n    </>\r\n  );\r\n};\r\n\r\nIndex.getInitialProps = async ({ ctx }) => {\r\n  // 请求 github 数据，因为不能暴露 token，将请求代理到服务器\r\n  // 服务器渲染默认端口为 80\r\n  const { store } = ctx;\r\n  /*\r\n  const repoData = await getApiData(ctx, '/api/repository');\r\n  store.dispatch(actions.getGithubRepository(repoData));\r\n  */\r\n  /*  查看用户仓库信息需先登录\r\n  const id = store.getState().user.id;\r\n  if(!id) {\r\n    return;\r\n  }\r\n  */\r\n  const userRepoData = await getApiData(ctx, '/api/user/repos');\r\n  store.dispatch(actions.getUserRepos(userRepoData));\r\n  const userStarredRepoData = await getApiData(ctx, '/api/user/starred');\r\n  store.dispatch(actions.getUserRepos(userStarredRepoData));\r\n};\r\n\r\nexport default Index;\r\n"]},"metadata":{},"sourceType":"module"}