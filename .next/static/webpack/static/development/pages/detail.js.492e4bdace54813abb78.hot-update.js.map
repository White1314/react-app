{"version":3,"file":"static/webpack/static\\development\\pages\\detail.js.492e4bdace54813abb78.hot-update.js","sources":["webpack:///./pages/detail.tsx"],"sourcesContent":["import { Tabs } from 'antd';\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport { getApiData } from '../server/utils.js';\r\nimport * as actions from '../actions';\r\nimport Markdown from '../components/Markdown';\r\nimport Issues from '../components/Issues';\r\nimport SearchUser from '../components/SearchUser';\r\nimport { useState, useCallback } from 'react';\r\n\r\ninterface S {\r\n  detail: {\r\n    user_repo?: {\r\n      name: string;\r\n      owner: {\r\n        avatar_url: string;\r\n        login: string;\r\n      };\r\n    };\r\n    repo_readme?: {\r\n      content: any;\r\n    };\r\n    repo_issues: any;\r\n  };\r\n}\r\n\r\nconst Detail = ({}) => {\r\n  const userRepo = useSelector((state: S) => state.detail.user_repo);\r\n  const repoReadme = useSelector((state: S) => state.detail.repo_readme);\r\n  const repoIssues = useSelector((state: S) => state.detail.repo_issues);\r\n\r\n  // 父组件执行选中后的操作\r\n  const onChange = useCallback((value) => {\r\n    // ...\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <div className=\"root\">\r\n        <div className=\"head\">\r\n          <img src={userRepo.owner?.avatar_url} alt=\"\" className=\"head-img\" />\r\n          <span className=\"head-login\">{userRepo.owner?.login}</span>\r\n          <a className=\"head-name\">{`${userRepo.name} / ${userRepo.owner?.login}`}</a>\r\n        </div>\r\n        <div className=\"content\">\r\n          <Tabs defaultActiveKey=\"0\" animated={false}>\r\n            <Tabs.TabPane tab=\"文档\" key=\"0\">\r\n              <Markdown content={repoReadme.content} isBase64={true} />\r\n            </Tabs.TabPane>\r\n            <Tabs.TabPane tab=\"讨论\" key=\"1\">\r\n              <SearchUser onChange={onChange} />\r\n              {repoIssues.map((item: any) => (\r\n                <div className=\"issue\" key={item.id}>\r\n                  <Issues issues={item} />\r\n                </div>\r\n              ))}\r\n            </Tabs.TabPane>\r\n          </Tabs>\r\n        </div>\r\n      </div>\r\n\r\n      <style jsx>{`\r\n        .root {\r\n          height: 100%;\r\n          overflow-y: auto;\r\n        }\r\n        .head {\r\n          display: flex;\r\n          align-items: center;\r\n          font-size: 12px;\r\n        }\r\n        .head-img {\r\n          width: 30px;\r\n          height: 30px;\r\n        }\r\n        .head-login {\r\n          color: #666;\r\n          margin: 0 10px;\r\n        }\r\n        .head-name {\r\n          font-weight: 500;\r\n        }\r\n        .content {\r\n          margin-right: 20px;\r\n        }\r\n        .issue:hover {\r\n          border-top: 1px solid #6739b6;\r\n        }\r\n      `}</style>\r\n    </>\r\n  );\r\n};\r\n\r\nDetail.getInitialProps = async ({ ctx }) => {\r\n  const { store, query } = ctx;\r\n  const { owner, name } = query;\r\n\r\n  const data = Promise.all([\r\n    await getApiData(ctx, `/repos/${owner}/${name}`),\r\n    await getApiData(ctx, `/repos/${owner}/${name}/readme`),\r\n    await getApiData(ctx, `/repos/${owner}/${name}/issues`),\r\n  ]);\r\n\r\n  store.dispatch(actions.getDetailRepos(data[0]));\r\n  store.dispatch(actions.getRepoReadme(data[1]));\r\n  store.dispatch(actions.getRepoIssues(data[2]));\r\n};\r\n\r\nexport default Detail;\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAiBA;AAAA;AACA;AADA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAEA;AAEA;AAEA;AAEA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAEA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAFA;AAdA;AAAA;AAsDA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAIA;AAMA;AACA;AACA;AACA;AAbA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAcA;;;;A","sourceRoot":""}